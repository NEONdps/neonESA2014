---
title: "LiDAR derived products"
author: "Edmund Hart, Leah Wasser"
date: "August 10, 2014"
output: html_document
---

Neon will also provide derived LiDAR products. One such product is a digital surface model.  These products will come as TIFF's, and they can be easily accessed with the `raster` package.


```{r DSM}
library(raster)
dsm_f <- "/Users/thart/ESAData_2014/Part3_LiDAR/DigitalSurfaceModel/SJER2013_DSM.tif"
dsm <- raster(dsm_f)
## See info about the raster.
dsm
plot(dsm)
```

LiDAR will return a raster image with elevations at both the surface and the terrain.  By doing some basic raster math we can get a new raster of canopy heights.

```{r Canopy}
dtm_f <-  "/Users/thart/ESAData_2014/Part3_LiDAR/DigitalTerrainModel/SJER2013_DTM.tif"
dtm <- raster(dtm_f)
plot(dtm)

## Canopy height is dsm - dtm
canopyCalc <- function(x, y) {
  return(x - y)
  }

canopy <- overlay(dsm,dtm,fun = canopyCalc)
### a little raster math
plot(canopy)
```

This is great, but let's say you have some point data.  In our case we have two files.  One with plot centroids where stem heights were measured, and one with the full data.




